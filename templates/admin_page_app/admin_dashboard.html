<!-- admin_page_app/templates/admin_page_app/dashboard.html -->
{% extends "admin_base.html" %}
{% load static %}

{% block wrapper %}
<div class="wrapper">
    {% include "admin_page_partials/left_sidebar.html" %}

    <!-- ============================================================== -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->

    <div class="content-page">
        <div class="content">
            <!-- Topbar Start -->
            {% include "admin_page_partials/topbar.html" %}
            <!-- end Topbar -->

            <!-- Start Content-->
            <div class="container-fluid">
                
                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">E-learning</a></li>
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Admin</a></li>
                                    <li class="breadcrumb-item active">Dashboard</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Dashboard</h4>
                        </div>
                    </div>
                </div>     
                <!-- end page title --> 

                <div class="row">
                    <div class="col-lg-12">

                        <div class="row">
                            <!-- Registered Students Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-account-multiple widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Registered Students">Registered Students</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_total_students }}</h3>
                                        <p class="mb-0 text-muted">
                                            {% if student_percentage_change >= 0 %}
                                                <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> {{ student_percentage_change|floatformat:2 }}%</span>
                                            {% else %}
                                                <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> {{ student_percentage_change|floatformat:2 }}%</span>
                                            {% endif %}
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Registered Instructors Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-teach widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Registered Instructors">Registered Instructors</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_total_instructors }}</h3>
                                        <p class="mb-0 text-muted">
                                            {% if instructor_percentage_change >= 0 %}
                                                <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> {{ instructor_percentage_change|floatformat:2 }}%</span>
                                            {% else %}
                                                <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> {{ instructor_percentage_change|floatformat:2 }}%</span>
                                            {% endif %}
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Total Courses Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-book-multiple widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Total Courses">Total Courses</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_total_courses }}</h3>
                                        <p class="mb-0 text-muted">
                                            {% if course_percentage_change >= 0 %}
                                                <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> {{ course_percentage_change|floatformat:2 }}%</span>
                                            {% else %}
                                                <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> {{ course_percentage_change|floatformat:2 }}%</span>
                                            {% endif %}
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Total Enrollments Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-school widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Total Enrollments">Total Enrollments</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_total_enrollments }}</h3>
                                        <p class="mb-0 text-muted">
                                            {% if enrollment_percentage_change >= 0 %}
                                                <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> {{ enrollment_percentage_change|floatformat:2 }}%</span>
                                            {% else %}
                                                <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> {{ enrollment_percentage_change|floatformat:2 }}%</span>
                                            {% endif %}
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->
                        </div> <!-- end row -->

                    </div> <!-- end col -->
                    <div class="col-lg-12">

                        <div class="row">
                            <!-- Total Revenue Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-currency-usd widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Total Revenue">Total Revenue</h5>
                                        <h3 class="mt-3 mb-3">${{ dashboard_total_revenue|floatformat:2 }}</h3>
                                        <p class="mb-0 text-muted">
                                            {% if revenue_percentage_change >= 0 %}
                                                <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> {{ revenue_percentage_change|floatformat:2 }}%</span>
                                            {% else %}
                                                <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> {{ revenue_percentage_change|floatformat:2 }}%</span>
                                            {% endif %}
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Pending Activation Requests Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-timer-sand widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Pending Activation Requests">Pending Activation Requests</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_pending_activation_requests }}</h3>
                                        <p class="mb-0 text-muted">
                                            <!-- Assuming pending requests have increased -->
                                            <span class="text-danger me-2"><i class="mdi mdi-arrow-down-bold"></i> 0.00%</span>
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Approved Activation Requests Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-check-circle-outline widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Approved Activation Requests">Approved Activation Requests</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_approved_activation_requests }}</h3>
                                        <p class="mb-0 text-muted">
                                            <!-- Assuming approved requests have increased -->
                                            <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> 0.00%</span>
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->

                            <!-- Total Reviews Card -->
                            <div class="col-lg-3">
                                <div class="card widget-flat">
                                    <div class="card-body">
                                        <div class="float-end">
                                            <i class="mdi mdi-comment-text-outline widget-icon"></i>
                                        </div>
                                        <h5 class="text-muted fw-normal mt-0" title="Total Reviews">Total Reviews</h5>
                                        <h3 class="mt-3 mb-3">{{ dashboard_total_reviews }}</h3>
                                        <p class="mb-0 text-muted">
                                            <!-- Assuming total reviews have increased -->
                                            <span class="text-success me-2"><i class="mdi mdi-arrow-up-bold"></i> 0.00%</span>
                                            <span class="text-nowrap">Since last month</span>
                                        </p>
                                    </div> <!-- end card-body-->
                                </div> <!-- end card-->
                            </div> <!-- end col-->
                        </div> <!-- end row -->

                    </div> <!-- end col -->
                </div>
                <!-- end row -->

                <div class="row">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-body">
                                <div class="dropdown float-end">
                                    <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="mdi mdi-dots-vertical"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Export Report</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Profit</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Action</a>
                                    </div>
                                </div>
                                <h4 class="header-title mb-3">Revenue</h4>

                                <div class="chart-content-bg">
                                    <div class="row text-center">
                                        <div class="col-md-6">
                                            <p class="text-muted mb-0 mt-3">Current Month</p>
                                            <h2 class="fw-normal mb-3">
                                                <small class="mdi mdi-checkbox-blank-circle text-success align-middle me-1"></small>
                                                <span>${{ current_month_revenue|floatformat:2 }}</span>
                                            </h2>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="text-muted mb-0 mt-3">Previous Month</p>
                                            <h2 class="fw-normal mb-3">
                                                <small class="mdi mdi-checkbox-blank-circle text-success align-middle me-1"></small>
                                                <span>${{ previous_month_revenue|floatformat:2 }}</span>
                                            </h2>
                                        </div>
                                    </div>
                                </div>

                                <div class="dash-item-overlay d-none d-md-block" dir="ltr">
                                    <h5>Today's Earning: $2,562.30</h5>
                                    <p class="text-muted font-13 mb-3 mt-2">Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui.
                                        Etiam rhoncus...</p>
                                    <a href="javascript: void(0);" class="btn btn-outline-success">View Statements
                                        <i class="mdi mdi-arrow-right ms-2"></i>
                                    </a>
                                </div>
                                <div dir="ltr">
                                    <div id="revenue-chart" class="apex-charts mt-3" data-colors="#000,#0acf97"></div>
                                </div>
                            </div> <!-- end card-body-->
                        </div> <!-- end card-->
                    </div> <!-- end col-->

                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="dropdown float-end">
                                    <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="mdi mdi-dots-vertical"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Export Report</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Profit</a>
                                        <!-- item-->
                                        <a href="javascript:void(0);" class="dropdown-item">Action</a>
                                    </div>
                                </div>
                                <h4 class="header-title">Revenue By Category</h4>
                                <div class="mb-4 mt-4">
                                    <div id="revenue-by-category-chart" style="height: 224px"></div>
                                </div>

                                <!-- Example categories with random values -->
                                {% for category, value in revenue_by_category.items %}
                                    <h5 class="mb-1 mt-0 fw-normal">{{ category }}</h5>
                                    <div class="progress-w-percent">
                                        <span class="progress-value fw-bold">${{ value|floatformat:2 }} </span>
                                        <div class="progress progress-sm">
                                            <div class="progress-bar" role="progressbar" style="width: {{ value|floatformat:2 }}%;" aria-valuenow="{{ value }}" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div> <!-- end card-body-->
                        </div> <!-- end card-->
                    </div> <!-- end col-->
                </div>
                <!-- end row -->
                
            </div> <!-- container -->

        </div> <!-- content -->
        
        {% include "admin_page_partials/footer.html" %}
        
    </div>
    <!-- ============================================================== -->
    <!-- End Page content -->
    <!-- ============================================================== -->
</div>
{% endblock %}

{% block right_sidebar %}
{% include "admin_page_partials/right_sidebar.html" %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Revenue Chart
        const revenueData = {
            series: [{
                name: 'Revenue',
                data: [28, 40, 36, 52, 38, 60, 55]
            }],
            chart: {
                type: 'line',
                height: 350
            },
            xaxis: {
                categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
            },
            colors: ['#0acf97'],
            stroke: {
                width: 2
            },
            markers: {
                size: 4
            },
            grid: {
                borderColor: '#f1f3fa'
            }
        };

        const revenueChart = new ApexCharts(document.querySelector("#revenue-chart"), revenueData);
        revenueChart.render();

        // Revenue By Category Chart
        const revenueByCategoryData = {
            series: [44, 55, 41, 37, 22],
            chart: {
                width: 380,
                type: 'pie',
            },
            labels: ['Category 1', 'Category 2', 'Category 3', 'Category 4', 'Category 5'],
            colors: ['#0acf97', '#727cf5', '#ffbc00', '#fa5c7c', '#0b88c1'],
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }]
        };

        const revenueByCategoryChart = new ApexCharts(document.querySelector("#revenue-by-category-chart"), revenueByCategoryData);
        revenueByCategoryChart.render();
    });
</script>
{% endblock %}


