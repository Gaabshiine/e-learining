{% load static %}
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Skillup 24</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static "home_page_app/images/iconImage.png" %}">

    <!-- CSS (Font, Vendor, Icon, Plugins & Style CSS files) -->

    <!-- Font CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400&amp;display=swap" rel="stylesheet">

    <!-- Vendor CSS (Bootstrap & Icon Font) -->
    <link rel="stylesheet" href="{% static "home_page_app/css/vendor/fontawesome-all.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/vendor/edumall-icon.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/vendor/bootstrap.min.css" %} ">

    <!-- Plugins CSS (All Plugins Files) -->
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/aos.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/swiper-bundle.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/perfect-scrollbar.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/jquery.powertip.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/glightbox.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/flatpickr.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/ion.rangeSlider.min.css" %} ">
    <link rel="stylesheet" href="{% static "home_page_app/css/plugins/select2.min.css" %} ">
    

    <!-- Style CSS -->
    <link rel="stylesheet" href="{% static "home_page_app/css/style.css" %} ">

    <!-- Custom CSS -->
    <style>
        .error-message {
            color: red;
            font-size: 0.9em;
            display: block;
            margin-top: 5px;
        }
    </style>
    <style>
        .spinner-border {
          border: 2px solid rgba(255, 255, 255, 0.6);
          border-top: 2px solid transparent;
          border-radius: 50%;
          width: 1rem;
          height: 1rem;
          vertical-align: middle; /* Align spinner vertically with text */
          margin-right: 8px; /* Space between spinner and text */
          animation: spinner-border 0.75s linear infinite;
      }
      
      @keyframes spinner-border {
          to {
              transform: rotate(360deg);
          }
      }
      .btn-primary:disabled {
          cursor: not-allowed; /* Change cursor when disabled */
      }
  </style>

    {% block css_files %}{% endblock %}

</head>

<body>

    {% block main %}
    <main class="main-wrapper">
        <!-- Header Start -->
        {% block header %}
        {% endblock  %}
        <!-- Header End -->

        <!-- slider Start -->
        {% block slider %}{% endblock  %}
        <!-- slider End -->

        <!-- Offcanvas Start -->
        {% block offcanvas %}{% endblock  %}
        <!-- Offcanvas End -->

        <!-- Counter Start -->
        {% block counter %}{% endblock  %}
        <!-- Counter End -->

        <!-- Features Section Start -->
        {% block features %}{% endblock  %}
        <!-- Features Section End -->

        <!-- Course Section Start -->
        {% block course %}{% endblock  %}
        <!-- Course Section End -->

        <!-- Call To Action Start -->
        {% block call_to_action %}{% endblock  %}
        <!-- Call To Action End -->

        <!-- Category Start -->
        {% block category %}{% endblock  %}
        <!-- Category End -->

       

        <!-- Testimonial Section Start -->
        {% block testimonial %}{% endblock  %}
        <!-- Testimonial Section End -->


        <!-- FAQ Section Start -->
        {% block FAQ %}{% endblock  %}
        <!-- FAQ Section End -->


        <!-- Banner Start -->
        {% block banner %}{% endblock  %}
        <!-- Banner End -->

        <!-- Partner Section Start -->
        {% block partner %}{% endblock  %}
        <!-- Partner Section End -->


        <!-- Review Section Start -->
        {% block review %}{% endblock  %}
        <!-- Review Section End -->
  

        <!-- Footer Start -->
        {% block footer %}
        
        {% endblock  %}
        <!-- Footer End -->

        

    </main>
    {% endblock main %}

    <!-- contact icons Start -->
    <div class="edumall-demo-option">

        <div class="edumall-demo-option__toolbar">
            <a class="toolbar-action" href="https://wa.me/+252615272255" target="_blank" data-bs-tooltip="tooltip" data-bs-placement="left" title="Facebook"><i class="fab fa-whatsapp fs-5" style=""></i></a>
            <a class="toolbar-action" href="https://facebook.com/" target="_blank" data-bs-tooltip="tooltip" data-bs-placement="left" title="Facebook"><i class="fab fa-facebook fs-5"></i></a>
            <a class="toolbar-action" href="https://youtube.com/" target="_blank" data-bs-tooltip="tooltip" data-bs-placement="left" title="Youtube"><i class="fab fa-youtube fs-5"></i></a>
        </div>

    </div>
    <!-- contact icons End -->
    

    <!-- login Modal Start -->
    {% include "account_app_partials/login_student.html" %}

    
        
    <!-- login Modal End -->

    


    
    <!-- Registeration Modal Start -->
    {% include "account_app_partials/register_student_by_user.html" %}
    
    <!-- Registeration Modal End -->


    <!-- JS Vendor, Plugins & Activation Script Files -->

    <!-- Vendors JS -->
    <script src="{% static "home_page_app/js/vendor/modernizr-3.11.7.min.js" %} "></script>
    <script src="{% static "home_page_app/js/vendor/jquery-3.6.0.min.js" %}"></script>
    <script src="{% static "home_page_app/js/vendor/jquery-migrate-3.3.2.min.js" %}"></script>
    <script src="{% static "home_page_app/js/vendor/bootstrap.bundle.min.js" %}"></script>

    <!-- Plugins JS -->
    <script src="{% static "home_page_app/js/plugins/aos.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/parallax.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/swiper-bundle.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/perfect-scrollbar.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/jquery.powertip.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/nice-select.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/glightbox.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/jquery.sticky-kit.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/imagesloaded.pkgd.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/masonry.pkgd.min.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/flatpickr.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/range-slider.js" %}"></script>
    <script src="{% static "home_page_app/js/plugins/select2.min.js" %}"></script>


    <!-- Activation JS -->
    <script src="{% static "home_page_app/js/main.js" %}"></script>

    <!-- Custom login JS -->
    <script>
        // Custom JS
        document.addEventListener("DOMContentLoaded", function() {
            const loginButton = document.getElementById('loginButton');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const emailError = document.getElementById('emailError');
            const passwordError = document.getElementById('passwordError');
            const generalError = document.getElementById('generalError');

            loginButton.addEventListener('click', function(event) {
                let isValid = true;

                // Clear previous errors
                emailError.textContent = '';
                passwordError.textContent = '';
                generalError.style.display = 'none';

                // Email validation
                if (!validateEmail(emailInput.value)) {
                    emailError.textContent = 'Please enter a valid email address.';
                    isValid = false;
                }

                // Password validation
                if (passwordInput.value.trim() === '') {
                    passwordError.textContent = 'Password cannot be empty.';
                    isValid = false;
                }

                // If there are errors, prevent form submission
                if (!isValid) {
                    return;
                }

                // AJAX request to server for login
                const formData = new FormData();
                formData.append('email_address', emailInput.value);
                formData.append('password', passwordInput.value);
                
                fetch("{% url 'account_app:login' %}", {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}',
                        'X-Requested-With': 'XMLHttpRequest'  // Make sure to set this header
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Redirect to the appropriate page
                        window.location.href = data.redirect_url;
                    } else {
                        generalError.textContent = data.error;
                        generalError.style.display = 'block';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            });

            function validateEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
        });

    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Function to handle loading state of buttons
            function handleButtonLoadingState(button) {
                const originalText = button.textContent.trim();
                const loadingText = getLoadingText(originalText);
        
                // Show spinner and update button text
                const spinner = button.querySelector('.spinner-border');
                if (spinner) {
                    spinner.classList.remove('d-none');
                }
                button.querySelector('.button-text').textContent = loadingText;
        
                // Disable the button to prevent multiple clicks
                button.disabled = true;
            }
        
            // Function to reset button loading state
            function resetButtonLoadingState(button) {
                const originalText = button.dataset.originalText;
                const spinner = button.querySelector('.spinner-border');
        
                if (spinner) {
                    spinner.classList.add('d-none');
                }
                button.querySelector('.button-text').textContent = originalText;
                button.disabled = false;
            }
        
            // Function to derive the loading text based on the original text
            function getLoadingText(originalText) {
                if (originalText.endsWith('e')) {
                    return `${originalText.slice(0, -1)}ing...`;
                } else if (originalText.endsWith('y')) {
                    return `${originalText.slice(0, -1)}ying...`;
                }
                return `${originalText}ing...`;
            }
        
            // Store original text for all buttons
            const allButtons = document.querySelectorAll('button');
            allButtons.forEach(button => {
                button.dataset.originalText = button.textContent.trim();
            });
        
            // Select all forms and attach the spinner functionality
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function (event) {
                    event.preventDefault(); // Prevent default form submission
        
                    const submitButton = form.querySelector('button[type="submit"]');
                    if (!submitButton) {
                        return;
                    }
        
                    handleButtonLoadingState(submitButton);
        
                    // Fetch API to handle form submission
                    const formData = new FormData(form);
        
                    fetch(form.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value,
                            'X-Requested-With': 'XMLHttpRequest' // Mark the request as AJAX
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            // Handle success (e.g., redirect or show message)
                            location.reload();
                        } else {
                            // Reset button if there was an error
                            resetButtonLoadingState(submitButton);
                            // Show error messages (use your existing error handling code here)
                            displayErrors(data.errors);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        // Reset button on catch error
                        resetButtonLoadingState(submitButton);
                    });
                });
            });
        
            // Function to display error messages
            function displayErrors(errors) {
                if (errors) {
                    for (let field in errors) {
                        const errorElement = document.getElementById(`${field}Error`);
                        if (errorElement) {
                            errorElement.textContent = errors[field];
                            errorElement.style.display = 'block';
                        }
                    }
                }
            }
        
            // Add spinner handling for regular button clicks
            const buttons = document.querySelectorAll('button:not([type="submit"])');
            buttons.forEach(button => {
                button.addEventListener('click', function () {
                    handleButtonLoadingState(button);
        
                    // Perform any actions needed, then reset
                    window.addEventListener('load', function () {
                        resetButtonLoadingState(button);
                    });
                });
            });
        });
        
        
    </script>

        
    
    {% block js_files %}{% endblock %}
</body>

</html>
                                            



